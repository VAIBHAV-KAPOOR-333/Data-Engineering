| Input Type   | Allowed  | When Used            |
| ------------ | -------  | -------------------- |
| Tuple        | ✅       | Simple test data     |
| List         | ✅       | Same as tuple        |
| Dict         | ✅       | JSON / API data      |
| Row          | ✅       | Structured pipelines |
| Pandas DF    | ✅       | Analytics / ML       |
| Single tuple | ❌       | Not valid            |


Use tuple/list → quick testing
Use dict / Row → real-world data engineering
Always prefer schema definition in production (for performance)


Input → CSV / JSON
Processing → PySpark
Output → Parquet


TRANSFORMATIONS-
select()
filter()
withColumn()
groupBy()

ACTIONS-
show()
count()
collect()
write()


WRITE DATA MODES-
overwrite
append
ignore


What is a Data Engineering Pipeline in PySpark?
Source (CSV / DB / Logs)
    ↓
Read using Spark
    ↓
Clean & Transform
    ↓
Aggregate
    ↓
Write to Data Lake (Parquet)


| Task           | Simple Meaning                        |
| -------------- | ------------------------------------- |
| Data ingestion | Bringing data from apps, files, APIs  |
| ETL / ELT      | Cleaning & transforming data          |
| Storage        | Saving data in databases / warehouses |
| Data quality   | Ensuring data is correct              |
| Monitoring     | Checking pipelines don’t fail         |
| Optimization   | Making pipelines fast & cheap         |


NoSQL Databases (Basic Understanding)
| Type      | Used For                    |
| --------- | --------------------------- |
| Document  | JSON data (MongoDB)         |
| Column    | Large analytics (Cassandra) |
| Key-Value | Fast lookup (Redis)         |
| Graph     | Relationships (Neo4j)       |


OLTP Characteristics:
Small amount of data per query
Very fast response needed
Many users at the same time
Data is frequently updated

OLTP Databases:
MySQL
PostgreSQL
Oracle
SQL Server


OLAP Characteristics:
Large data scans
Mostly READ operations
Few users, heavy queries
Data updated periodically (daily/hourly)

OLAP Systems:
Amazon Redshift
Google BigQuery
Snowflake
Apache Hive


| Feature   | OLTP         | OLAP            |
| --------- | ------------ | --------------- |
| Purpose   | Transactions | Analysis        |
| Queries   | Simple       | Complex         |
| Data size | Small        | Very large      |
| Schema    | Normalized   | Denormalized    |
|       (remove duplicates)| (faster reads)  |                   
| Example   | Banking app  | Sales dashboard |


App Data → OLTP DB
OLTP → ETL/ELT → Data Lake
Data Lake → OLAP Warehouse
OLAP → Analytics & Reports


| Feature           | Star   | Snowflake |
| ----------------- | ------ | --------- |
| Complexity        | Simple | Complex   |
| Performance       | Faster | Slower    |
| Storage           | More   | Less      |
| Beginner friendly | Yes    | No        |


SCD Summary:
| Type   | History    | Usage       |
| ------ | ---------- | ----------- |
| Type 1 | No         | Corrections |
| Type 2 | Full       | Analytics   |
| Type 3 | Limited    | Last change |


| Feature     | Natural Key | Surrogate Key |
| ----------- | ----------- | ------------- |
| Source      | Business    | System        |
| Changes     | Can change  | Never         |
| SCD Type 2  | Bad         | Perfect       |
| Performance | Slower      | Faster        |


| Feature            | ETL         | ELT         |
| ------------------ | ----------- | ----------- |
| Transform location | Before load | After load  |
| Raw data stored    | No          | Yes         |
| Scalability        | Low         | High        |
| Cloud friendly     | No          | Yes         |
| Modern usage       | Rare        | Very common |


| Feature    | Batch   | Streaming      |
| ---------- | ------- | -------------- |
| Speed      | Slow    | Real-time      |
| Complexity | Simple  | Complex        |
| Use case   | Reports | Live analytics |


| Format  | Best For    |
| ------- | ----------- |
| CSV     | Small files |
| JSON    | APIs        |
| Avro    | Streaming   |
| Parquet | Analytics   |
| ORC     | Hive        |


Raw Data → Ingest → Store (Parquet) → Transform → Analyze
OR
Source → Ingestion → Storage → Processing → Analytics
1️⃣ Source
Apps, DBs, APIs
2️⃣ Ingestion Layer
Kafka, API scripts, file loaders
3️⃣ Storage
Data Lake (S3 HDFS)
Data Warehouse
4️⃣ Processing
Spark
SQL
dbt
5️⃣ Orchestration
Airflow
Prefect
6️⃣ Consumption
BI tools
ML models


Where validation happens?
During data ingestion
Before loading into warehouse
Before sending data to analytics / ML


Good Data Quality
        ↓
Governed & Documented Data
        ↓
Compliant with Laws
        ↓
Secure Access
        ↓
Trusted Analytics & ML


| Topic             | Real Usage                    |
| ----------------- | ----------------------------- |
| Joins             | Combine multiple systems      |
| Window Functions  | Dedup, ranking, latest record |
| CTEs              | Clean transformation logic    |
| Recursive Queries | Hierarchies                   |
| Indexing          | Performance                   |
| Incremental SQL   | Daily pipelines               |
| CDC               | Real-time & batch sync        |


Real-World Data Engineering Flow:
1. Call API
2. Convert JSON → DataFrame
3. Clean data using pandas
4. Save as Parquet
5. Insert into database
6. Log every step


| SparkSession              | SparkContext             |
| ------------------------- | ------------------------ |
| High-level API            | Low-level engine         |
| Used for DataFrames & SQL | Used for RDDs            |
| You use it directly       | Spark uses it internally |


| Feature         | RDD  | DataFrame | Dataset |
| --------------- | ---- | --------- | ------- |
| Level           | Low  | High      | High    |
| Schema          | ❌   | ✅        | ✅      |
| Optimization    | ❌   | ✅        | ✅      |
| Used in PySpark | Rare | Most      | ❌      |


| Feature           | Cron | Airflow |
| ----------------- | ---- | ------- |
| Scheduling        | ✅   | ✅      |
| Task dependencies | ❌   | ✅      |
| Monitoring        | ❌   | ✅      |
| Retries           | ❌   | ✅      |
| UI Dashboard      | ❌   | ✅      |


| Feature        | Luigi | Airflow  |
| -------------- | ----- | -------- |
| UI             | Basic | Powerful |
| Scheduling     | Basic | Advanced |
| Learning curve | Easy  | Moderate |






